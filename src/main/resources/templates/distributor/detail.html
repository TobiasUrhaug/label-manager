<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: page(title='Distributor Details', content=~{::main})}">
<main>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 th:text="${distributor.name}">Distributor Name</h1>
        <a th:href="@{/labels/{id}(id=${label.id})}"
           class="btn btn-outline-secondary">Back to Label</a>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <dl class="row mb-0">
                <dt class="col-sm-3">Channel Type</dt>
                <dd class="col-sm-9" th:text="${distributor.channelType}">DISTRIBUTOR</dd>
            </dl>
        </div>
    </div>

    <h2 class="mb-3">Sales</h2>

    <div class="card mb-4">
        <div class="card-body">
            <p th:if="${sales.empty}" class="text-muted mb-0">No sales recorded yet.</p>
            <table th:unless="${sales.empty}" class="table mb-0">
                <thead>
                <tr>
                    <th>Date</th>
                    <th>Total Units</th>
                    <th>Total Revenue</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="sale : ${sales}">
                    <td th:text="${#temporals.format(sale.saleDate, 'MMM dd, yyyy')}">Jan 01, 2026</td>
                    <td th:text="${#aggregates.sum(sale.lineItems.![quantity])}">0</td>
                    <td th:if="${sale.totalAmount != null}"
                        th:text="${sale.totalAmount.amount} + ' ' + ${sale.totalAmount.currency}">
                        0.00 EUR
                    </td>
                    <td th:unless="${sale.totalAmount != null}">â€”</td>
                    <td>
                        <a th:href="@{/labels/{labelId}/sales/{saleId}(
                                labelId=${label.id},saleId=${sale.id})}"
                           class="btn btn-sm btn-outline-primary">View</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <h2 class="mb-3">Returns</h2>

    <div class="card">
        <div class="card-body">
            <p th:if="${returns.empty}" class="text-muted mb-0">No returns recorded yet.</p>
            <table th:unless="${returns.empty}" class="table mb-0">
                <thead>
                <tr>
                    <th>Date</th>
                    <th>Total Units</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="ret : ${returns}">
                    <td th:text="${#temporals.format(ret.returnDate, 'MMM dd, yyyy')}">Jan 01, 2026</td>
                    <td th:text="${#aggregates.sum(ret.lineItems.![quantity])}">0</td>
                    <td>
                        <a th:href="@{/labels/{labelId}/returns/{returnId}(
                                labelId=${label.id},returnId=${ret.id})}"
                           class="btn btn-sm btn-outline-primary">View</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</main>
</html>
